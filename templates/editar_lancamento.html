<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Editar Lançamento</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body {
            padding-bottom: 70px;
        }
    </style>
</head>
<body class="bg-light">
    <div class="container mt-4">
        <h2 class="text-center mb-4">Editar Lançamento</h2>

        <div class="card shadow-sm">
            <div class="card-body">
                <form method="POST">
                    <div class="mb-3">
                        <label for="mes" class="form-label">Mês:</label>
                        <select name="mes" id="mes" class="form-select" required>
                            <option value="" disabled {% if not dados[0] %}selected{% endif %}>Selecione o mês</option>
                            {% set meses = [
                                ('01', 'Janeiro'), ('02', 'Fevereiro'), ('03', 'Março'), ('04', 'Abril'),
                                ('05', 'Maio'), ('06', 'Junho'), ('07', 'Julho'), ('08', 'Agosto'),
                                ('09', 'Setembro'), ('10', 'Outubro'), ('11', 'Novembro'), ('12', 'Dezembro')
                            ] %}
                            {% for valor, nome in meses %}
                                <option value="{{ valor }}" {% if dados[0] == valor %}selected{% endif %}>{{ nome }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="descricao" class="form-label">Descrição:</label>
                        <input type="text" id="descricao" name="descricao" class="form-control" required value="{{ dados[1] }}">
                    </div>

                    <div class="mb-3">
                        <label for="categoria" class="form-label">Categoria:</label>
                        <select name="categoria" id="categoria" class="form-select" required>
                            <option value="" disabled {% if not dados[2] %}selected{% endif %}>Selecione a categoria</option>
                            {% for cat in categorias %}
                                <option value="{{ cat }}" {% if dados[2] == cat %}selected{% endif %}>{{ cat }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="tipo" class="form-label">Tipo:</label>
                        <select name="tipo" id="tipo" class="form-select" required>
                            <option value="entrada" {% if dados[3] == 'entrada' %}selected{% endif %}>Entrada</option>
                            <option value="saida" {% if dados[3] == 'saida' %}selected{% endif %}>Saída</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="valor" class="form-label">Valor:</label>
                        <input type="text" id="valor" name="valor" class="form-control" placeholder="0,00" required
                               oninput="formatarValor(this)" value="{{ dados[4]|default('0.00')|replace('.', ',') }}">
                    </div>

                    <div class="d-grid">
                        <button type="submit" class="btn btn-success">
                            <i class="bi bi-check-circle me-1"></i>Salvar Alterações
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
    function formatarValor(input) {
        let valor = input.value.replace(/\D/g, '');
        valor = (parseInt(valor, 10) || 0).toString().padStart(3, '0');
        let reais = valor.slice(0, -2);
        let centavos = valor.slice(-2);
        input.value = reais + ',' + centavos;
    }
    </script>

    <!-- Barra inferior de navegação -->
    <nav class="navbar fixed-bottom bg-primary">
    <div class="container-fluid d-flex justify-content-around text-white">
        <a href="/dashboard" class="text-center text-decoration-none {% if active_page == 'dashboard' %}bg-dark rounded px-2{% endif %}">
            <i class="bi bi-house-fill fs-4"></i><br>Dashboard
        </a>
        <a href="/orcamentos" class="text-center text-decoration-none {% if active_page == 'orcamentos' %}bg-dark rounded px-2{% endif %}">
            <i class="bi bi-calendar-check-fill fs-4"></i><br>Orçamentos
        </a>
        <a href="/lancamentos" class="text-center text-decoration-none {% if active_page == 'lancamentos' %}bg-dark rounded px-2{% endif %}">
            <i class="bi bi-cash-stack fs-4"></i><br>Lançamentos
        </a>
        <a href="/graficos" class="text-center text-decoration-none {% if active_page == 'graficos' %}bg-dark rounded px-2{% endif %}">
            <i class="bi bi-bar-chart-fill fs-4"></i><br>Relatórios
        </a>
        <a href="/categorias" class="text-center text-decoration-none {% if active_page == 'categorias' %}bg-dark rounded px-2{% endif %}">
            <i class="bi bi-tags-fill fs-4"></i><br>Categorias
        </a>
        <a href="/perfil" class="text-center text-decoration-none {% if active_page == 'perfil' %}bg-dark rounded px-2{% endif %}">
            <i class="bi bi-person-circle fs-4"></i><br>Perfil
        </a>
    </div>
</nav>

</body>
</html>
